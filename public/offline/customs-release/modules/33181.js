wwplayer.define(["module","BaseModule","jquery","globals","underscore","apiService","pubsub","TweenMax","slick"],function(i,t,e,o,n,a,r,l,s){"use strict";function d(i){return i&&i.__esModule?i:{default:i}}function u(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function f(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function c(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?i:t}function h(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)}var w=d(t),g=d(e),v=d(o),p=d(n),b=d(a),m=d(r),y=d(l),S=(d(s),function(){function i(i,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),t}}()),L=void 0,_=y.default;i.exports=function(i){function t(i){f(this,t);var e=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return L=e,L.loadStyleHead(window.wirewax.moduleUrl+"style/33181.css"),L.toolkit.loadFont("creativeData/fonts/HelveticaNeueLTPro-Md/","HelveticaNeueLTPro-Md","HelveticaNeueLTPro-Md"),L.toolkit.loadFont("creativeData/fonts/HTFDidot-M16MediumItalic/","HTFDidot-M16MediumItalic","HTFDidot-M16MediumItalic"),m.default.subscribe("tagClicked",L.updateWishList),m.default.subscribe("openWishList",L.wishListIn),m.default.subscribe("giftData",function(i,t){L.sheetData=t}),m.default.subscribe("mobileOrientationChange",L.changeOrientation),L.setupAll(),e}return h(t,i),S(t,[{key:"setupAll",value:function(){L.checkWindowMode();var i=v.default.IS_DESKTOP?"":L.mobileOrientation,t=v.default.IS_IPAD?"isIpad":"";L.mainOverlay=(0,g.default)('<div id="wishList_Holder" class="'+i+'">\n                <div id="wishListHolder_BG"></div>\n                <div id="wishList">\n                    <div id="wishList_Star" class="star_DropDown">\n                        <svg x="0px" y="0px" viewBox="0 0 73.59 69.79" style="enable-background:new 0 0 73.59 69.79;">\n                            <g>\n                                <polygon style="fill:#FFFFFF;" points="45.5,26.59 36.83,0 28.18,26.59 0,26.59 22.83,43.11 14.18,69.71 36.8,53.26 59.55,69.79 50.86,43.07 73.59,26.59"/>\n                            </g>\n                        </svg>\n                    </div><br>\n                    <div id="wishList_Title">KEEP LOOKING</div><br>\n                    <div id="wishList_SubTitle">You haven\'t found any gifts yet!</div><br>\n                    <div id="giftSlider" class="'+t+'">\n                            <div id="giftSlider_Content"></div>\n                        <div id="giftSlider_LeftArrow" class="giftSlider_Arrow"></div>\n                        <div id="giftSlider_RightArrow" class="giftSlider_Arrow"></div>\n                    </div>\n                    <div id="wishList_Holder_Social">\n                      <div id="twitterIcon" class="navIcon"></div>\n                      <div id="facebookIcon" class="navIcon"></div>\n                    </div>\n                </div>\n            </div>'),(0,g.default)("#waxxer #widget-overlay").append(L.mainOverlay),L.wishListHolder=L.mainOverlay.find("#wishList_holder"),L.wishListHolderBG=L.mainOverlay.find("#wishListHolder_BG"),L.wishList=L.mainOverlay.find("#wishList"),L.wishListStar=L.mainOverlay.find("#wishList_Star"),L.wishListTitle=L.mainOverlay.find("#wishList_Title"),L.wishListSubTitle=L.mainOverlay.find("#wishList_SubTitle"),L.giftSliderLeftArrow=L.mainOverlay.find("#giftSlider_LeftArrow"),L.giftSliderRightArrow=L.mainOverlay.find("#giftSlider_RightArrow"),L.giftSlider=L.mainOverlay.find("#giftSlider"),L.giftSliderContent=L.mainOverlay.find("#giftSlider_Content"),L.wishList_Holder_Social=L.mainOverlay.find("#wishList_Holder_Social"),L.twitterButton=L.mainOverlay.find("#twitterIcon"),L.facebookButton=L.mainOverlay.find("#facebookIcon"),L.giftsFoundCounter=0,L.giftFoundCount=0,L.wishListCount=0,L.wishListArray=[],L.currentHeight=0,_.set([L.wishList,L.wishListHolderBG],{autoAlpha:0}),L.checkHeight(),v.default.IS_DESKTOP&&([L.giftSliderLeftArrow,L.giftSliderRightArrow].map(function(i){(0,g.default)(i).mouseover(function(){_.to(this,.2,{scale:1.05,force3D:!1})}),(0,g.default)(i).mouseout(function(){_.to(this,.2,{scale:1,force3D:!1})})}),[L.twitterButton,L.facebookButton].map(function(i){(0,g.default)(i).mouseover(function(){_.to(this,.2,{scale:1.1,force3D:!1})}),(0,g.default)(i).mouseout(function(){_.to(this,.2,{scale:1,force3D:!1})})})),(0,g.default)(L.giftSliderLeftArrow).on(v.default.CLICK_EVENT,function(){}),(0,g.default)(L.giftSliderRightArrow).on(v.default.CLICK_EVENT,function(){}),(0,g.default)(L.wishListHolderBG).on(v.default.CLICK_EVENT,function(){L.wishListOut()}),(0,g.default)(L.twitterButton).on(v.default.CLICK_EVENT,function(){L.socialShare("Twitter")}),(0,g.default)(L.facebookButton).on(v.default.CLICK_EVENT,function(){L.socialShare("Facebook")}),L.buildSlider()}},{key:"socialShare",value:function(i){switch(i){case"Facebook":b.default.widgetShareClick("fb","I found "+L.giftsFoundCounter+" hidden gift"+(1==L.giftsFoundCounter?"":"s")+". How many can you find?","www.macysgiftglobe.com",null,null);break;case"Twitter":b.default.widgetShareClick("tw","I found "+L.giftsFoundCounter+" gift"+(1==L.giftsFoundCounter?"":"s")+" hidden inside @Macys Gift Globe. How many can you find? www.macysgiftglobe.com #WonderOfGiving","www.macysgiftglobe.com",null,null)}}},{key:"buildSlider",value:function(){"isPortrait"==L.mobileOrientation?L.slickOptions=u({slidesToShow:2,slidesToScroll:1,draggable:!0,swipe:!0,touchMove:!0,arrows:!0,prevArrow:L.giftSliderLeftArrow,nextArrow:L.giftSliderRightArrow,infinite:!0,swipeToSlide:!0,vertical:!0},"swipeToSlide",!0):L.slickOptions={slidesToShow:4,slidesToScroll:1,draggable:!0,swipe:!0,touchMove:!0,arrows:!0,prevArrow:L.giftSliderLeftArrow,nextArrow:L.giftSliderRightArrow,infinite:!0,swipeToSlide:!0},L.giftSliderContent.slick(L.slickOptions)}},{key:"updateWishList",value:function(i,t){L.wishListStar.removeClass("star_DropDown"),L.giftFoundCount++,L.wishListCount++;var e=p.default.where(L.sheetData,{customnameref:t[0]});L.wishListArray.push(e[0]);var o,n;L.giftFoundCount<15?(o="KEEP LOOKING",n="You have "+(L.sheetData.length-L.giftFoundCount)+" more gifts to find"):L.giftFoundCount>=15&&L.giftFoundCount<L.sheetData.length?(o="ALMOST THERE",n="You have "+(L.sheetData.length-L.giftFoundCount)+" more gift"+(19==L.giftFoundCount?"":"s")+" to find"):L.giftFoundCount==L.sheetData.length&&(o="CONGRATULATIONS",n="You found all "+L.sheetData.length+" gifts!"),L.wishListTitle.text(o),L.wishListSubTitle.text(n);var a=(0,g.default)('<div id="'+e[0].customnameref+'" class="wishList_Entry">\n                <div class="gift_BG">\n                    <div class="gift_Image" style="background-image: url(\''+e[0].imageurl+'\');"></div>\n                    <div class="gift_ShopButton"></div>\n                </div>\n                <div class="gift_BrandName gift_Copy">'+e[0].brand+'</div><br>\n                <div class="gift_ProductName gift_Copy">'+e[0].product+"</div><br>\n            </div>");L.giftSliderContent.slick("slickAdd",a),L.giftSliderContent.slick("setPosition");var r=(0,g.default)(a).find(".gift_ShopButton");(0,g.default)(a).find(".gift_CheckMark");L.giftWidth=(0,g.default)(a).outerWidth(!0),v.default.IS_DESKTOP&&((0,g.default)(r).mouseover(function(){_.to(this,.2,{scale:1.1,force3D:!0})}),(0,g.default)(r).mouseout(function(){_.to(this,.2,{scale:1,force3D:!0})})),(0,g.default)(r).on(v.default.CLICK_EVENT,function(){L.doClickout(e[0].link,"Overlay text clickout",!0)}),L.giftFoundCount==L.sheetData.length&&L.wishListIn(),L.giftsFoundCounter++}},{key:"wishListIn",value:function(i,t){L.player.dragDisabled=!0,m.default.publish("showHideIcons","hide"),L.recordUiMetric("WishList <---\x3e Open <---\x3e "+new Date,L.appRef,v.default.WIDGET_METRIC_TYPES.MEDIA_EXPAND),_.fromTo(L.wishListHolderBG,.2,{autoAlpha:0},{autoAlpha:1}),_.fromTo(L.wishList,.4,{autoAlpha:0},{autoAlpha:1,onComplete:function(){L.giftSliderContent.slick("setPosition")}})}},{key:"wishListOut",value:function(){_.fromTo(L.wishListHolderBG,.3,{autoAlpha:1},{autoAlpha:0}),_.fromTo(L.wishList,.3,{autoAlpha:1},{autoAlpha:0,onComplete:function(){}}),m.default.publish("showHideIcons","show"),L.recordUiMetric("WishList <---\x3e Closed <---\x3e "+new Date,L.appRef,v.default.WIDGET_METRIC_TYPES.MEDIA_CLOSE),L.player.dragDisabled=!1}},{key:"changeOrientation",value:function(i,t){L.mobileOrientation=t,L.mainOverlay&&L.mainOverlay.attr("class",L.mobileOrientation),L.giftSliderContent.slick("destroy"),L.buildSlider(),L.checkHeight()}},{key:"checkHeight",value:function(){v.default.IS_ANDROID&&"isLandscape"==L.mobileOrientation&&window.innerHeight>=L.currentHeight?(L.mainOverlay.css("min-height",window.innerHeight),L.currentHeight=window.innerHeight):v.default.IS_ANDROID&&"isPortrait"==L.mobileOrientation&&L.mainOverlay.css("min-height","")}},{key:"checkWindowMode",value:function(){window.innerHeight>window.innerWidth?L.mobileOrientation="isPortrait":L.mobileOrientation="isLandscape"}}]),t}(w.default)});