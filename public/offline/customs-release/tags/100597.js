wwplayer.define(["module","jquery","BaseTagNew","pubsub","underscore","globals","TweenMax"],function(e,t,a,n,i,o,l){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=r(t),d=r(a),g=r(n),p=r(i),T=r(o),v=r(l),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();T.default.SMOOTH_FONT_STEPS=!1,T.default.ASSETS=[],!T.default.IS_DESKTOP||T.default.IS_EDGE||T.default.IS_IE_11?T.default.FORCE_RENDITION="1080":T.default.FORCE_RENDITION="4k",T.default.VIDEO_PRELOAD="auto",T.default.DISABLE_SPACE_BAR_PLAY=!0,T.default.PREVENT_VIDEO_DOUBLE_CLICK=!0,T.default.DISABLE_360_CONTROLS=!0,T.default.STARTING_YAW=-90;var h=v.default;e.exports=function(e){function t(e){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return c(t,e),b(t,[{key:"loadFonts",value:function(){this.getFont("creativeData/fonts/HelveticaNeueLTPro-Md/","HelveticaNeueLTPro-Md","HelveticaNeueLTPro-Md")}},{key:"createElements",value:function(){var e=this;e.checkWindowMode();var t=T.default.IS_DESKTOP?"":e.mobileOrientation;e.targetTag=(0,s.default)('<div class="targetTag '+t+'">\n                <div id="tagSparkle" class="tagVisual"></div>\n                <div id="tagStar" class="tagVisual"></div>\n                <div id="tagTitle"></div>           \n            </div>'),(0,s.default)(e.element).find(".tag-inner-box").empty(),(0,s.default)(e.element).find(".tag-inner-box").append(e.targetTag),e.tagPositionX&&(0,s.default)(e.element).find(".targetTag").css("left",e.tagPositionX+"%"),e.tagPositionY&&(0,s.default)(e.element).find(".targetTag").css("top",e.tagPositionY+"%"),e.tagSparkle=e.targetTag.find("#tagSparkle"),e.tagStar=e.targetTag.find("#tagStar"),e.tagTitle=e.targetTag.find("#tagTitle"),e.beenClicked=!1,h.set([e.tagSparkle,e.tagStar,e.tagTitle],{autoAlpha:0}),g.default.subscribe("giftData",function(t,a){e.sheetData=a,e.setupTitle()}),g.default.subscribe("mobileOrientationChange",function(t,a){e.mobileOrientation=a;var n="targetTag "+e.mobileOrientation;e.targetTag&&e.targetTag.attr("class",n)}),g.default.subscribe("controlTwinkling",function(t,a){"start"==a?0==e.beenClicked&&e.tl.play():e.tl.stop()}),e.tl=new TimelineMax({paused:!0,repeat:-1,onRepeat:function(){h.set(e.tagSparkle,{rotation:Math.ceil(360*Math.random())})},onRepeatScope:e});var a=4*Math.random()+2;e.tl.add("sparkles").to(e.tagSparkle,.1,{autoAlpha:1,delay:a,force3D:!1}).to(e.tagSparkle,.2,{autoAlpha:0,force3D:!1})}},{key:"setupTitle",value:function(){var e=this,t=p.default.where(e.sheetData,{customnameref:e.customNameRef});e.tagTitle.text(t[0].product)}},{key:"checkWindowMode",value:function(){var e=this;window.innerHeight>window.innerWidth?e.mobileOrientation="isPortrait":e.mobileOrientation="isLandscape"}},{key:"onTagClick",value:function(e){var t=this;0==t.beenClicked?(t.beenClicked=!0,g.default.publish("restartSound","TagClicked"),t.tl.stop(),h.killTweensOf(t.tagSparkle),h.to(t.tagSparkle,.1,{autoAlpha:0}),h.fromTo(t.tagStar,.6,{autoAlpha:0,scale:.6},{autoAlpha:1,scale:1,ease:Elastic.easeOut}),h.to(t.tagTitle,.2,{autoAlpha:1}),h.to(t.tagTitle,.2,{autoAlpha:0,delay:3}),g.default.publish("tagClicked",[t.customNameRef,t.tagSparkle])):g.default.publish("openWishList","on")}},{key:"onTagClickPre",value:function(e){}},{key:"tagMouseOver",value:function(e){}},{key:"tagMouseLeave",value:function(e){}},{key:"onBringInFirst",value:function(){}},{key:"onBringIn",value:function(){}},{key:"onFrameUpdate",value:function(){}},{key:"checkView",value:function(e){}},{key:"onAnimateOut",value:function(){}},{key:"onPlayerResize",value:function(){}}]),t}(d.default)});