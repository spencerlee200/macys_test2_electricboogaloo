window.pannellum2=function(e,t,n){"use strict";function a(a,o){function i(t){e.removeEventListener("deviceorientation",i),t&&null!==t.alpha&&null!==t.beta&&null!==t.gamma?(Ve.container.appendChild(Ve.orientation),Qe=!0,$e&&re()):Qe=!1}function r(){var a=t.createElement("div");if(a.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1==a.getElementsByTagName("i").length)return void h();ge=de.hfov,we=de.pitch;var o,i;if("cubemap"==de.type){for(me=[],o=0;o<6;o++)me.push(new Image),me[o].crossOrigin=de.crossOrigin;_e.load.lbox.style.display="block",_e.load.lbar.style.display="none"}else if("multires"==de.type){var r=JSON.parse(JSON.stringify(de.multiRes));de.basePath&&de.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(de.multiRes.basePath)?r.basePath=de.basePath+de.multiRes.basePath:de.multiRes.basePath?r.basePath=de.multiRes.basePath:de.basePath&&(r.basePath=de.basePath),me=r}else if(!0===de.dynamic)me=de.panorama;else{if(de.panorama===n)return void h(de.strings.noPanoramaError);me=new Image}if("cubemap"==de.type){var d=6,u=function(){0===--d&&l()},p=function(e){var n=t.createElement("a");n.href=e.target.src,n.textContent=n.href,h(de.strings.fileAccessError.replace("%s",n.outerHTML))};for(o=0;o<me.length;o++)i=de.cubeMap[o],"null"==i?(console.log("Will use background instead of missing cubemap face "+o),u()):(de.basePath&&!s(i)&&(i=de.basePath+i),me[o].onload=u,me[o].onerror=p,me[o].src=le(i))}else if("multires"==de.type)l();else if(i="",de.basePath&&(i=de.basePath),!0!==de.dynamic){i=s(de.panorama)?de.panorama:i+de.panorama,me.onload=function(){e.URL.revokeObjectURL(this.src),l()};var f=new XMLHttpRequest;f.onloadend=function(){if(200!=f.status){var e=t.createElement("a");e.href=i,e.textContent=e.href,h(de.strings.fileAccessError.replace("%s",e.outerHTML))}c(this.response),_e.load.msg.innerHTML=""},f.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;_e.load.lbarFill.style.width=t+"%";var n,a,o;e.total>1e6?(n="MB",a=(e.loaded/1e6).toFixed(2),o=(e.total/1e6).toFixed(2)):e.total>1e3?(n="kB",a=(e.loaded/1e3).toFixed(1),o=(e.total/1e3).toFixed(1)):(n="B",a=e.loaded,o=e.total),_e.load.msg.innerHTML=a+" / "+o+" "+n}else _e.load.lbox.style.display="block",_e.load.lbar.style.display="none"};try{f.open("GET",i,!0)}catch(e){h(de.strings.malformedURLError)}f.responseType="blob",f.setRequestHeader("Accept","image/*,*/*;q=0.9"),f.withCredentials="use-credentials"===de.crossOrigin,f.send()}de.draggable&&je.classList.add("pnlm-grab"),je.classList.remove("pnlm-grabbing")}function s(e){return new RegExp("^(?:[a-z]+:)?//","i").test(e)||"/"==e[0]||"blob:"==e.slice(0,5)}function l(){ue||(ue=new Pe.renderer(Ze)),He||(He=!0,Xe.addEventListener("mousedown",f,!1),t.addEventListener("mousemove",y,!1),t.addEventListener("mouseup",g,!1),de.mouseZoom&&(je.addEventListener("mousewheel",L,!1),je.addEventListener("DOMMouseScroll",L,!1)),de.doubleClickZoom&&Xe.addEventListener("dblclick",m,!1),je.addEventListener("mozfullscreenchange",V,!1),je.addEventListener("webkitfullscreenchange",V,!1),je.addEventListener("msfullscreenchange",V,!1),je.addEventListener("fullscreenchange",V,!1),e.addEventListener("resize",H,!1),e.addEventListener("orientationchange",H,!1),de.disableKeyboardCtrl||(a.addEventListener("keydown",k,!1),a.addEventListener("keyup",I,!1),a.addEventListener("blur",C,!1)),t.addEventListener("mouseleave",g,!1),""===t.documentElement.style.pointerAction&&""===t.documentElement.style.touchAction?(Xe.addEventListener("pointerdown",M,!1),Xe.addEventListener("pointermove",x,!1),Xe.addEventListener("pointerup",E,!1),Xe.addEventListener("pointerleave",E,!1)):(Xe.addEventListener("touchstart",w,!1),Xe.addEventListener("touchmove",b,!1),Xe.addEventListener("touchend",P,!1)),e.navigator.pointerEnabled&&(a.style.touchAction="none")),B(),te(de.hfov),setTimeout(function(){Se=!0},500)}function c(t){var a=new FileReader;a.addEventListener("loadend",function(){var o=a.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var i=o.indexOf("ÿÂ");(i<0||i>65536)&&h(de.strings.iOS8WebGLError)}var r=o.indexOf("<x:xmpmeta");if(r>-1&&!0!==de.ignoreGPanoXMP){var s=o.substring(r,o.indexOf("</x:xmpmeta>")+12),l=function(e){var t;return s.indexOf(e+'="')>=0?(t=s.substring(s.indexOf(e+'="')+e.length+2),t=t.substring(0,t.indexOf('"'))):s.indexOf(e+">")>=0&&(t=s.substring(s.indexOf(e+">")+e.length+1),t=t.substring(0,t.indexOf("<"))),t!==n?Number(t):null},c={fullWidth:l("GPano:FullPanoWidthPixels"),croppedWidth:l("GPano:CroppedAreaImageWidthPixels"),fullHeight:l("GPano:FullPanoHeightPixels"),croppedHeight:l("GPano:CroppedAreaImageHeightPixels"),topPixels:l("GPano:CroppedAreaTopPixels"),heading:l("GPano:PoseHeadingDegrees"),horizonPitch:l("GPano:PosePitchDegrees"),horizonRoll:l("GPano:PoseRollDegrees")};null!==c.fullWidth&&null!==c.croppedWidth&&null!==c.fullHeight&&null!==c.croppedHeight&&null!==c.topPixels&&(Be.indexOf("haov")<0&&(de.haov=c.croppedWidth/c.fullWidth*360),Be.indexOf("vaov")<0&&(de.vaov=c.croppedHeight/c.fullHeight*180),Be.indexOf("vOffset")<0&&(de.vOffset=-180*((c.topPixels+c.croppedHeight/2)/c.fullHeight-.5)),null!==c.heading&&Be.indexOf("northOffset")<0&&(de.northOffset=c.heading,!1!==de.compass&&(de.compass=!0)),null!==c.horizonPitch&&null!==c.horizonRoll&&(Be.indexOf("horizonPitch")<0&&(de.horizonPitch=c.horizonPitch),Be.indexOf("horizonRoll")<0&&(de.horizonRoll=c.horizonRoll)))}me.src=e.URL.createObjectURL(t)}),a.readAsBinaryString!==n?a.readAsBinaryString(t):a.readAsText(t)}function h(e){e===n&&(e=de.strings.genericWebGLError),_e.errorMsg.innerHTML="<p>"+e+"</p>",Ve.load.style.display="none",_e.load.box.style.display="none",_e.errorMsg.style.display="table",Re=!0,Ze.style.display="none",he("error",e)}function d(){Re&&(_e.load.box.style.display="none",_e.errorMsg.style.display="none",Re=!1,he("errorcleared"))}function u(e){var t=p(e);Ke.style.left=t.x+"px",Ke.style.top=t.y+"px",clearTimeout(u.t1),clearTimeout(u.t2),Ke.style.display="block",Ke.style.opacity=1,u.t1=setTimeout(function(){Ke.style.opacity=0},2e3),u.t2=setTimeout(function(){Ke.style.display="none"},2500),e.preventDefault()}function p(e){var t=a.getBoundingClientRect(),n={};return n.x=e.clientX-t.left,n.y=e.clientY-t.top,n}function f(e){if(e.preventDefault(),a.focus(),fe&&de.draggable){var t=p(e);if(de.hotSpotDebug){var n=v(e);console.log("Pitch: "+n[0]+", Yaw: "+n[1]+", Center Pitch: "+de.pitch+", Center Yaw: "+de.yaw+", HFOV: "+de.hfov)}ne(),ie(),de.roll=0,De.hfov=0,Me=!0,xe=Date.now(),Ee=t.x,Le=t.y,Ce=de.yaw,Ie=de.pitch,je.classList.add("pnlm-grabbing"),je.classList.remove("pnlm-grab"),he("mousedown",e),D()}}function m(e){if(de.minHfov===de.hfov)be.setHfov(ge,1e3);else{var t=v(e);be.lookAt(t[0],t[1],de.minHfov,1e3)}}function v(e){var t=p(e),n=ue.getCanvas(),a=n.clientWidth,o=n.clientHeight,i=t.x/a*2-1,r=(1-t.y/o*2)*o/a,s=1/Math.tan(de.hfov*Math.PI/360),l=Math.sin(de.pitch*Math.PI/180),c=Math.cos(de.pitch*Math.PI/180),h=s*c-r*l,d=Math.sqrt(i*i+h*h),u=180*Math.atan((r*c+s*l)/d)/Math.PI,f=180*Math.atan2(i/d,h/d)/Math.PI+de.yaw;return f<-180&&(f+=360),f>180&&(f-=360),[u,f]}function y(e){if(Me&&fe){xe=Date.now();var t=ue.getCanvas(),n=t.clientWidth,a=t.clientHeight,o=p(e),i=180*(Math.atan(Ee/n*2-1)-Math.atan(o.x/n*2-1))/Math.PI*de.hfov/90+Ce;De.yaw=(i-de.yaw)%360*.2,de.yaw=i;var r=2*Math.atan(Math.tan(de.hfov/360*Math.PI)*a/n)*180/Math.PI,s=180*(Math.atan(o.y/a*2-1)-Math.atan(Le/a*2-1))/Math.PI*r/90+Ie;De.pitch=.2*(s-de.pitch),de.pitch=s}}function g(e){Me&&(Me=!1,Date.now()-xe>15&&(De.pitch=De.yaw=0),je.classList.add("pnlm-grab"),je.classList.remove("pnlm-grabbing"),xe=Date.now(),he("mouseup",e))}function w(e){if(fe&&de.draggable){ne(),ie(),de.roll=0,De.hfov=0;var t=p(e.targetTouches[0]);if(Ee=t.x,Le=t.y,2==e.targetTouches.length){var n=p(e.targetTouches[1]);Ee+=.5*(n.x-t.x),Le+=.5*(n.y-t.y),ke=Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))}Me=!0,xe=Date.now(),Ce=de.yaw,Ie=de.pitch,he("touchstart",e),D()}}function b(e){if(de.draggable&&(e.preventDefault(),fe&&(xe=Date.now()),Me&&fe)){var t=p(e.targetTouches[0]),n=t.x,a=t.y;if(2==e.targetTouches.length&&-1!=ke){var o=p(e.targetTouches[1]);n+=.5*(o.x-t.x),a+=.5*(o.y-t.y);var i=Math.sqrt((t.x-o.x)*(t.x-o.x)+(t.y-o.y)*(t.y-o.y));te(de.hfov+.1*(ke-i)),ke=i}var r=de.hfov/360*de.touchPanSpeedCoeffFactor,s=(Ee-n)*r+Ce;De.yaw=(s-de.yaw)%360*.2,de.yaw=s;var l=(a-Le)*r+Ie;De.pitch=.2*(l-de.pitch),de.pitch=l}}function P(){Me=!1,Date.now()-xe>150&&(De.pitch=De.yaw=0),ke=-1,xe=Date.now(),he("touchend",event)}function M(e){"touch"==e.pointerType&&(tt.push(e.pointerId),nt.push({clientX:e.clientX,clientY:e.clientY}),e.targetTouches=nt,w(e),e.preventDefault())}function x(e){if("touch"==e.pointerType)for(var t=0;t<tt.length;t++)if(e.pointerId==tt[t])return nt[t].clientX=e.clientX,nt[t].clientY=e.clientY,e.targetTouches=nt,b(e),void e.preventDefault()}function E(e){if("touch"==e.pointerType){for(var t=!1,a=0;a<tt.length;a++)e.pointerId==tt[a]&&(tt[a]=n),tt[a]&&(t=!0);t||(tt=[],nt=[],P()),e.preventDefault()}}function L(e){fe&&("fullscreenonly"!=de.mouseZoom||ze)&&(e.preventDefault(),ne(),xe=Date.now(),e.wheelDeltaY?(te(de.hfov-.05*e.wheelDeltaY),De.hfov=e.wheelDelta<0?1:-1):e.wheelDelta?(te(de.hfov-.05*e.wheelDelta),De.hfov=e.wheelDelta<0?1:-1):e.detail&&(te(de.hfov+1.5*e.detail),De.hfov=e.detail>0?1:-1),D())}function k(e){ne(),xe=Date.now(),ie(),de.roll=0;var t=e.which||e.keycode;de.capturedKeyNumbers.indexOf(t)<0||(e.preventDefault(),27==t?ze&&J():O(t,!0))}function C(){for(var e=0;e<10;e++)Oe[e]=!1}function I(e){var t=e.which||e.keycode;de.capturedKeyNumbers.indexOf(t)<0||(e.preventDefault(),O(t,!1))}function O(e,t){var n=!1;switch(e){case 109:case 189:case 17:case 173:Oe[0]!=t&&(n=!0),Oe[0]=t;break;case 107:case 187:case 16:case 61:Oe[1]!=t&&(n=!0),Oe[1]=t;break;case 38:Oe[2]!=t&&(n=!0),Oe[2]=t;break;case 87:Oe[6]!=t&&(n=!0),Oe[6]=t;break;case 40:Oe[3]!=t&&(n=!0),Oe[3]=t;break;case 83:Oe[7]!=t&&(n=!0),Oe[7]=t;break;case 37:Oe[4]!=t&&(n=!0),Oe[4]=t;break;case 65:Oe[8]!=t&&(n=!0),Oe[8]=t;break;case 39:Oe[5]!=t&&(n=!0),Oe[5]=t;break;case 68:Oe[9]!=t&&(n=!0),Oe[9]=t}n&&t&&(ve="undefined"!=typeof performance&&performance.now()?performance.now():Date.now(),D())}function z(){if(fe){var e,t=!1,a=de.pitch,o=de.yaw,i=de.hfov;e="undefined"!=typeof performance&&performance.now()?performance.now():Date.now(),ve===n&&(ve=e);var r=(e-ve)*de.hfov/1700;r=Math.min(r,1),Oe[0]&&!0===de.keyboardZoom&&(te(de.hfov+(.8*De.hfov+.5)*r),t=!0),Oe[1]&&!0===de.keyboardZoom&&(te(de.hfov+(.8*De.hfov-.2)*r),t=!0),(Oe[2]||Oe[6])&&(de.pitch+=(.8*De.pitch+.2)*r,t=!0),(Oe[3]||Oe[7])&&(de.pitch+=(.8*De.pitch-.2)*r,t=!0),(Oe[4]||Oe[8])&&(de.yaw+=(.8*De.yaw-.2)*r,t=!0),(Oe[5]||Oe[9])&&(de.yaw+=(.8*De.yaw+.2)*r,t=!0),t&&(xe=Date.now());Date.now();if(de.autoRotate){if(e-ve>.001){var s=(e-ve)/1e3,l=(De.yaw/s*r-.2*de.autoRotate)*s;l=(-de.autoRotate>0?1:-1)*Math.min(Math.abs(de.autoRotate*s),Math.abs(l)),de.yaw+=l}de.autoRotateStopDelay&&(de.autoRotateStopDelay-=e-ve,de.autoRotateStopDelay<=0&&(de.autoRotateStopDelay=!1,Ae=de.autoRotate,de.autoRotate=0))}if(Ye.pitch&&(R("pitch"),a=de.pitch),Ye.yaw&&(R("yaw"),o=de.yaw),Ye.hfov&&(R("hfov"),i=de.hfov),r>0&&!de.autoRotate){Oe[4]||Oe[5]||Oe[8]||Oe[9]||Ye.yaw||(de.yaw+=De.yaw*r*.85),Oe[2]||Oe[3]||Oe[6]||Oe[7]||Ye.pitch||(de.pitch+=De.pitch*r*.85),Oe[0]||Oe[1]||Ye.hfov||te(de.hfov+De.hfov*r*.85)}if(ve=e,r>0){De.yaw=.8*De.yaw+(de.yaw-o)/r*.2,De.pitch=.8*De.pitch+(de.pitch-a)/r*.2,De.hfov=.8*De.hfov+(de.hfov-i)/r*.2;var c=de.autoRotate?Math.abs(de.autoRotate):5;De.yaw=Math.min(c,Math.max(De.yaw,-c)),De.pitch=Math.min(c,Math.max(De.pitch,-c)),De.hfov=Math.min(c,Math.max(De.hfov,-c))}Oe[0]&&Oe[1]&&(De.hfov=0),(Oe[2]||Oe[6])&&(Oe[3]||Oe[7])&&(De.pitch=0),(Oe[4]||Oe[8])&&(Oe[5]||Oe[9])&&(De.yaw=0)}}function R(e){var t=Ye[e],n=Math.min(1,Math.max((Date.now()-t.startTime)/1e3/(t.duration/1e3),0)),a=t.startPosition+de.animationTimingFunction(n)*(t.endPosition-t.startPosition);if(t.endPosition>t.startPosition&&a>=t.endPosition||t.endPosition<t.startPosition&&a<=t.endPosition||t.endPosition===t.startPosition){a=t.endPosition,De[e]=0;var o=Ye[e].callback,i=Ye[e].callbackArgs;delete Ye[e],"function"==typeof o&&o(i)}de[e]=a}function S(e){return e<.5?2*e*e:(4-2*e)*e-1}function H(){V()}function D(){Te||(Te=!0,T())}function T(){if(N(),ye&&clearTimeout(ye),Me||!0===Ne)requestAnimationFrame(T);else if(Oe[0]||Oe[1]||Oe[2]||Oe[3]||Oe[4]||Oe[5]||Oe[6]||Oe[7]||Oe[8]||Oe[9]||de.autoRotate||Ye.pitch||Ye.yaw||Ye.hfov||Math.abs(De.yaw)>.01||Math.abs(De.pitch)>.01||Math.abs(De.hfov)>.01)z(),de.autoRotateInactivityDelay>=0&&Ae&&Date.now()-xe>de.autoRotateInactivityDelay&&!de.autoRotate&&(de.autoRotate=Ae,be.lookAt(we,n,ge,3e3)),requestAnimationFrame(T);else if(ue&&(ue.isLoading()||!0===de.dynamic&&qe))requestAnimationFrame(T);else{Te=!1,ve=n;var e=de.autoRotateInactivityDelay-(Date.now()-xe);e>0?ye=setTimeout(function(){de.autoRotate=Ae,be.lookAt(we,n,ge,3e3),D()},e):de.autoRotateInactivityDelay>=0&&Ae&&(de.autoRotate=Ae,be.lookAt(we,n,ge,3e3),D())}}function N(){var e;if(fe){de.yaw>180?de.yaw-=360:de.yaw<-180&&(de.yaw+=360),e=de.yaw;var t=0;if(de.avoidShowingBackground){var a=ue.getCanvas(),o=de.hfov/2,i=180*Math.atan2(Math.tan(o/180*Math.PI),a.width/a.height)/Math.PI;de.vaov>de.haov?i*(1-Math.min(Math.cos((de.pitch-o)/180*Math.PI),Math.cos((de.pitch+o)/180*Math.PI))):t=o*(1-Math.min(Math.cos((de.pitch-i)/180*Math.PI),Math.cos((de.pitch+i)/180*Math.PI)))}var r=de.maxYaw-de.minYaw,s=-180,l=180;r<360&&(s=de.minYaw+de.hfov/2+t,l=de.maxYaw-de.hfov/2-t,r<de.hfov&&(s=l=(s+l)/2),de.yaw=Math.max(s,Math.min(l,de.yaw))),!1!==de.autoRotate&&e!=de.yaw&&ve!==n&&(de.autoRotate*=-1);var a=ue.getCanvas(),c=2*Math.atan(Math.tan(de.hfov/180*Math.PI*.5)/(a.width/a.height))/Math.PI*180,h=de.minPitch+c/2,d=de.maxPitch-c/2;de.maxPitch-de.minPitch<c&&(h=d=(h+d)/2),isNaN(h)&&(h=-90),isNaN(d)&&(d=90),de.pitch=Math.max(h,Math.min(d,de.pitch)),ue.render(de.pitch*Math.PI/180,de.yaw*Math.PI/180,de.hfov*Math.PI/180,{roll:de.roll*Math.PI/180}),X(),de.compass&&(et.style.transform="rotate("+(-de.yaw-de.northOffset)+"deg)",et.style.webkitTransform="rotate("+(-de.yaw-de.northOffset)+"deg)")}}function F(e,t,n,a){this.w=e,this.x=t,this.y=n,this.z=a}function A(e,t,n){var a=[t?t*Math.PI/180/2:0,n?n*Math.PI/180/2:0,e?e*Math.PI/180/2:0],o=[Math.cos(a[0]),Math.cos(a[1]),Math.cos(a[2])],i=[Math.sin(a[0]),Math.sin(a[1]),Math.sin(a[2])];return new F(o[0]*o[1]*o[2]-i[0]*i[1]*i[2],i[0]*o[1]*o[2]-o[0]*i[1]*i[2],o[0]*i[1]*o[2]+i[0]*o[1]*i[2],o[0]*o[1]*i[2]+i[0]*i[1]*o[2])}function Y(t,n,a){var o=A(t,n,a);o=o.multiply(new F(Math.sqrt(.5),-Math.sqrt(.5),0,0));var i=e.orientation?-e.orientation*Math.PI/180/2:0;return o.multiply(new F(Math.cos(i),0,-Math.sin(i),0))}function W(e){var t=Y(e.alpha,e.beta,e.gamma).toEulerAngles();"number"==typeof Ne&&Ne<10?Ne+=1:10===Ne?(Fe=t[2]/Math.PI*180+de.yaw,Ne=!0,requestAnimationFrame(T)):(de.pitch=t[0]/Math.PI*180,de.roll=-t[1]/Math.PI*180,de.yaw=-t[2]/Math.PI*180+Fe)}function B(){try{var e={};de.horizonPitch!==n&&(e.horizonPitch=de.horizonPitch*Math.PI/180),de.horizonRoll!==n&&(e.horizonRoll=de.horizonRoll*Math.PI/180),de.backgroundColor!==n&&(e.backgroundColor=de.backgroundColor),ue.init(me,de.type,de.dynamic,de.haov*Math.PI/180,de.vaov*Math.PI/180,de.vOffset*Math.PI/180,q,e),!0!==de.dynamic&&(me=n)}catch(e){if("webgl error"==e.type||"no webgl"==e.type)h();else{if("webgl size error"!=e.type)throw h(de.strings.unknownError),e;h(de.strings.textureSizeError.replace("%s",e.width).replace("%s",e.maxWidth))}}}function q(){if(de.sceneFadeDuration&&ue.fadeImg!==n){ue.fadeImg.style.opacity=0;var e=ue.fadeImg;delete ue.fadeImg,setTimeout(function(){Ze.removeChild(e),he("scenechangefadedone")},de.sceneFadeDuration)}de.compass?et.style.display="inline":et.style.display="none",U(),_e.load.box.style.display="none",pe!==n&&(Ze.removeChild(pe),pe=n),fe=!0,he("load"),D()}function G(e){e.pitch=Number(e.pitch)||0,e.yaw=Number(e.yaw)||0;var n=t.createElement("div");n.className="pnlm-hotspot-base",e.cssClass?n.className+=" "+e.cssClass:n.className+=" pnlm-hotspot pnlm-sprite pnlm-"+se(e.type);var a=t.createElement("span");e.text&&(a.innerHTML=se(e.text));var o;if(e.video){var i=t.createElement("video"),r=e.video;de.basePath&&!s(r)&&(r=de.basePath+r),i.src=le(r),i.controls=!0,i.style.width=e.width+"px",Ze.appendChild(n),a.appendChild(i)}else if(e.image){var r=e.image;de.basePath&&!s(r)&&(r=de.basePath+r),o=t.createElement("a"),o.href=le(e.URL?e.URL:r),o.target="_blank",a.appendChild(o);var l=t.createElement("img");l.src=le(r),l.style.width=e.width+"px",l.style.paddingTop="5px",Ze.appendChild(n),o.appendChild(l),a.style.maxWidth="initial"}else e.URL?(o=t.createElement("a"),o.href=le(e.URL),o.target="_blank",Ze.appendChild(o),n.className+=" pnlm-pointer",a.className+=" pnlm-pointer",o.appendChild(n)):(e.sceneId&&(n.onclick=n.ontouchend=function(){return n.clicked||(n.clicked=!0,oe(e.sceneId,e.targetPitch,e.targetYaw,e.targetHfov)),!1},n.className+=" pnlm-pointer",a.className+=" pnlm-pointer"),Ze.appendChild(n));e.createTooltipFunc?e.createTooltipFunc(n,e.createTooltipArgs):(e.text||e.video||e.image)&&(n.classList.add("pnlm-tooltip"),n.appendChild(a),a.style.width=a.scrollWidth-20+"px",a.style.marginLeft=-(a.scrollWidth-n.offsetWidth)/2+"px",a.style.marginTop=-a.scrollHeight-12+"px"),e.clickHandlerFunc&&(n.addEventListener("click",function(t){e.clickHandlerFunc(t,e.clickHandlerArgs)},"false"),n.className+=" pnlm-pointer",a.className+=" pnlm-pointer"),e.div=n}function U(){Ge||(de.hotSpots?(de.hotSpots=de.hotSpots.sort(function(e,t){return e.pitch<t.pitch}),de.hotSpots.forEach(G)):de.hotSpots=[],Ge=!0,X())}function j(){var e=de.hotSpots;if(Ge=!1,delete de.hotSpots,e)for(var t=0;t<e.length;t++){for(var n=e[t].div;n.parentNode!=Ze;)n=n.parentNode;Ze.removeChild(n),delete e[t].div}}function Z(e){var t=Math.sin(e.pitch*Math.PI/180),n=Math.cos(e.pitch*Math.PI/180),a=Math.sin(de.pitch*Math.PI/180),o=Math.cos(de.pitch*Math.PI/180),i=Math.cos((-e.yaw+de.yaw)*Math.PI/180),r=t*a+n*i*o;if(e.yaw<=90&&e.yaw>-90&&r<=0||(e.yaw>90||e.yaw<=-90)&&r<=0)e.div.style.visibility="hidden";else{var s=Math.sin((-e.yaw+de.yaw)*Math.PI/180),l=Math.tan(de.hfov*Math.PI/360);e.div.style.visibility="visible";var c=ue.getCanvas(),h=c.clientWidth,d=c.clientHeight,u=[-h/l*s*n/r/2,-h/l*(t*o-n*i*a)/r/2],p=Math.sin(de.roll*Math.PI/180),f=Math.cos(de.roll*Math.PI/180);u=[u[0]*f-u[1]*p,u[0]*p+u[1]*f],u[0]+=(h-e.div.offsetWidth)/2,u[1]+=(d-e.div.offsetHeight)/2;var m="translate("+u[0]+"px, "+u[1]+"px) translateZ(9999px) rotate("+de.roll+"deg)";e.div.style.webkitTransform=m,e.div.style.MozTransform=m,e.div.style.transform=m}}function X(){de.hotSpots.forEach(Z)}function K(e){de={};var t,n,a=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];Be=[];for(t in Ue)Ue.hasOwnProperty(t)&&(de[t]=Ue[t]);for(t in o.default)if(o.default.hasOwnProperty(t))if("strings"==t)for(n in o.default.strings)o.default.strings.hasOwnProperty(n)&&(de.strings[n]=se(o.default.strings[n]));else de[t]=o.default[t],a.indexOf(t)>=0&&Be.push(t);if(null!==e&&""!==e&&o.scenes&&o.scenes[e]){var i=o.scenes[e];for(t in i)if(i.hasOwnProperty(t))if("strings"==t)for(n in i.strings)i.strings.hasOwnProperty(n)&&(de.strings[n]=se(i.strings[n]));else de[t]=i[t],a.indexOf(t)>=0&&Be.push(t);de.scene=e}for(t in o)if(o.hasOwnProperty(t))if("strings"==t)for(n in o.strings)o.strings.hasOwnProperty(n)&&(de.strings[n]=se(o.strings[n]));else de[t]=o[t],a.indexOf(t)>=0&&Be.push(t)}function _(e){if((e=e||!1)&&"preview"in de){var a=de.preview;de.basePath&&!s(a)&&(a=de.basePath+a),pe=t.createElement("div"),pe.className="pnlm-preview-img",pe.style.backgroundImage="url('"+ce(a)+"')",Ze.appendChild(pe)}var o=de.title,i=de.author;e&&("previewTitle"in de&&(de.title=de.previewTitle),"previewAuthor"in de&&(de.author=de.previewAuthor)),de.hasOwnProperty("title")||(_e.title.innerHTML=""),de.hasOwnProperty("author")||(_e.author.innerHTML=""),de.hasOwnProperty("title")||de.hasOwnProperty("author")||(_e.container.style.display="none"),Ve.load.innerHTML="<p>"+de.strings.loadButtonLabel+"</p>",_e.load.boxp.innerHTML=de.strings.loadingLabel;for(var l in de)if(de.hasOwnProperty(l))switch(l){case"title":_e.title.innerHTML=se(de[l]),_e.container.style.display="inline";break;case"author":_e.author.innerHTML=de.strings.bylineLabel.replace("%s",se(de[l])),_e.container.style.display="inline";break;case"fallback":var c=t.createElement("a");c.href=le(de[l]),c.target="_blank",c.textContent="Click here to view this panorama in an alternative viewer.";var h=t.createElement("p");h.textContent="Your browser does not support WebGL.",h.appendChild(t.createElement("br")),h.appendChild(c),_e.errorMsg.innerHTML="",_e.errorMsg.appendChild(h);break;case"hfov":te(Number(de[l]));break;case"autoLoad":!0===de[l]&&ue===n&&(_e.load.box.style.display="inline",Ve.load.style.display="none",r());break;case"showZoomCtrl":de[l]&&0!=de.showControls?Ve.zoom.style.display="block":Ve.zoom.style.display="none";break;case"showFullscreenCtrl":de[l]&&0!=de.showControls&&("fullscreen"in t||"mozFullScreen"in t||"webkitIsFullScreen"in t||"msFullscreenElement"in t)?Ve.fullscreen.style.display="block":Ve.fullscreen.style.display="none";break;case"hotSpotDebug":de[l]?Je.style.display="block":Je.style.display="none";break;case"showControls":de[l]||(Ve.orientation.style.display="none",Ve.zoom.style.display="none",Ve.fullscreen.style.display="none");break;case"orientationOnByDefault":de[l]&&(Qe===n?$e=!0:!0===Qe&&re())}e&&(o?de.title=o:delete de.title,i?de.author=i:delete de.author)}function J(){if(fe&&!Re)if(ze)t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen();else try{a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullScreen()}catch(e){}}function V(){t.fullscreen||t.mozFullScreen||t.webkitIsFullScreen||t.msFullscreenElement?(Ve.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),ze=!0):(Ve.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),ze=!1),ue.resize(),te(de.hfov),D()}function Q(){fe&&(te(de.hfov-5),D())}function $(){fe&&(te(de.hfov+5),D())}function ee(e){var t=de.minHfov;if("multires"==de.type&&ue&&(t=Math.min(t,ue.getCanvas().width/(de.multiRes.cubeResolution/90*.9))),t>de.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),de.hfov;var n=de.hfov;if(n=e<t?t:e>de.maxHfov?de.maxHfov:e,de.avoidShowingBackground&&ue){var a=ue.getCanvas();n=Math.min(n,360*Math.atan(Math.tan((de.maxPitch-de.minPitch)/360*Math.PI)/a.height*a.width)/Math.PI)}return n}function te(e){de.hfov=ee(e)}function ne(){Ye={},Ae=de.autoRotate?de.autoRotate:Ae,de.autoRotate=!1}function ae(){d(),fe=!1,Ve.load.style.display="none",_e.load.box.style.display="inline",r()}function oe(e,t,a,i,r){fe=!1,Ye={};var s,l,c,h;if(de.sceneFadeDuration&&!r){var d=ue.render(de.pitch*Math.PI/180,de.yaw*Math.PI/180,de.hfov*Math.PI/180,{returnImage:!0});if(d!==n)return s=new Image,s.className="pnlm-fade-img",s.style.transition="opacity "+de.sceneFadeDuration/1e3+"s",s.style.width="100%",s.style.height="100%",s.onload=function(){oe(e,t,a,i,!0)},s.src=d,Ze.appendChild(s),void(ue.fadeImg=s)}l="same"===t?de.pitch:t,c="same"===a?de.yaw:"sameAzimuth"===a?de.yaw+(de.northOffset||0)-(o.scenes[e].northOffset||0):a,h="same"===i?de.hfov:i,j(),K(e),De.yaw=De.pitch=De.hfov=0,_(),l!==n&&(de.pitch=l),c!==n&&(de.yaw=c),h!==n&&(de.hfov=h),he("scenechange",e),ae()}function ie(){e.removeEventListener("deviceorientation",W),Ve.orientation.classList.remove("pnlm-orientation-button-active"),Ne=!1}function re(){Ne=1,e.addEventListener("deviceorientation",W),Ve.orientation.classList.add("pnlm-orientation-button-active")}function se(e){return o.escapeHTML?String(e).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(e).split("\n").join("<br>")}function le(e){return 0===e.trim().toLowerCase().indexOf("javascript:")?"about:blank":e}function ce(e){return le(e).replace(/"/g,"%22").replace(/'/g,"%27")}function he(e){if(e in We)for(var t=We[e].length;t>0;t--)We[e][We[e].length-t].apply(null,[].slice.call(arguments,1))}var de,ue,pe,fe,me,ve,ye,ge,we,be=this,Pe=require("libpannellum2"),Me=!1,xe=Date.now(),Ee=0,Le=0,ke=-1,Ce=0,Ie=0,Oe=new Array(10),ze=!1,Re=!1,Se=!1,He=!1,De={yaw:0,pitch:0,hfov:0},Te=!1,Ne=!1,Fe=0,Ae=0,Ye={},We={},Be=[],qe=!1,Ge=!1,Ue={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:n,maxPitch:n,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:n,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:S,draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189]};Ue.strings={loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."},a="string"==typeof a?t.getElementById(a):a,a.classList.add("pnlm-container"),a.tabIndex=0;var je=t.createElement("div");je.className="pnlm-ui",a.appendChild(je);var Ze=t.createElement("div");Ze.className="pnlm-render-container",a.appendChild(Ze);var Xe=t.createElement("div");Xe.className="pnlm-dragfix",je.appendChild(Xe);var Ke=t.createElement("span");Ke.className="pnlm-about-msg",Ke.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a>',je.appendChild(Ke),Xe.addEventListener("contextmenu",u);var _e={},Je=t.createElement("div");Je.className="pnlm-sprite pnlm-hot-spot-debug-indicator",je.appendChild(Je),_e.container=t.createElement("div"),_e.container.className="pnlm-panorama-info",_e.title=t.createElement("div"),_e.title.className="pnlm-title-box",_e.container.appendChild(_e.title),_e.author=t.createElement("div"),_e.author.className="pnlm-author-box",_e.container.appendChild(_e.author),je.appendChild(_e.container),_e.load={},_e.load.box=t.createElement("div"),_e.load.box.className="pnlm-load-box",_e.load.boxp=t.createElement("p"),_e.load.box.appendChild(_e.load.boxp),_e.load.lbox=t.createElement("div"),_e.load.lbox.className="pnlm-lbox",_e.load.lbox.innerHTML='<div class="pnlm-loading"></div>',_e.load.box.appendChild(_e.load.lbox),_e.load.lbar=t.createElement("div"),_e.load.lbar.className="pnlm-lbar",_e.load.lbarFill=t.createElement("div"),_e.load.lbarFill.className="pnlm-lbar-fill",_e.load.lbar.appendChild(_e.load.lbarFill),_e.load.box.appendChild(_e.load.lbar),_e.load.msg=t.createElement("p"),_e.load.msg.className="pnlm-lmsg",_e.load.box.appendChild(_e.load.msg),je.appendChild(_e.load.box),_e.errorMsg=t.createElement("div"),_e.errorMsg.className="pnlm-error-msg pnlm-info-box",je.appendChild(_e.errorMsg);var Ve={};Ve.container=t.createElement("div"),Ve.container.className="pnlm-controls-container",je.appendChild(Ve.container),Ve.load=t.createElement("div"),Ve.load.className="pnlm-load-button",Ve.load.addEventListener("click",function(){_(),ae()}),je.appendChild(Ve.load),Ve.zoom=t.createElement("div"),Ve.zoom.className="pnlm-zoom-controls pnlm-controls",Ve.zoomIn=t.createElement("div"),Ve.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",Ve.zoomIn.addEventListener("click",Q),Ve.zoom.appendChild(Ve.zoomIn),Ve.zoomOut=t.createElement("div"),Ve.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",Ve.zoomOut.addEventListener("click",$),Ve.zoom.appendChild(Ve.zoomOut),Ve.container.appendChild(Ve.zoom),Ve.fullscreen=t.createElement("div"),Ve.fullscreen.addEventListener("click",J),Ve.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(t.fullscreenEnabled||t.mozFullScreenEnabled||t.webkitFullscreenEnabled||t.msFullscreenEnabled)&&Ve.container.appendChild(Ve.fullscreen),Ve.orientation=t.createElement("div"),Ve.orientation.addEventListener("click",function(e){Ne?ie():re()}),Ve.orientation.addEventListener("mousedown",function(e){e.stopPropagation()}),Ve.orientation.addEventListener("touchstart",function(e){e.stopPropagation()}),Ve.orientation.addEventListener("pointerdown",function(e){e.stopPropagation()}),Ve.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var Qe,$e=!1;e.DeviceOrientationEvent?e.addEventListener("deviceorientation",i):Qe=!1;var et=t.createElement("div");et.className="pnlm-compass pnlm-controls pnlm-control",je.appendChild(et),K(o.firstScene?o.firstScene:o.default&&o.default.firstScene?o.default.firstScene:null),_(!0);var tt=[],nt=[];F.prototype.multiply=function(e){return new F(this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z,this.x*e.w+this.w*e.x+this.y*e.z-this.z*e.y,this.y*e.w+this.w*e.y+this.z*e.x-this.x*e.z,this.z*e.w+this.w*e.z+this.x*e.y-this.y*e.x)},F.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(fe)},this.getPitch=function(){return de.pitch},this.setPitch=function(e,t,a,o){return t=t==n?1e3:Number(t),t?Ye.pitch={startTime:Date.now(),startPosition:de.pitch,endPosition:e,duration:t,callback:a,callbackArgs:o}:de.pitch=e,D(),this},this.getPitchBounds=function(){return[de.minPitch,de.maxPitch]},this.setPitchBounds=function(e){return de.minPitch=Math.max(-90,Math.min(e[0],90)),de.maxPitch=Math.max(-90,Math.min(e[1],90)),this},this.getYaw=function(){return de.yaw},this.setYaw=function(e,t,a,o){return t=t==n?1e3:Number(t),e=(e+180)%360-180,t?(de.yaw-e>180?e+=360:e-de.yaw>180&&(e-=360),Ye.yaw={startTime:Date.now(),startPosition:de.yaw,endPosition:e,duration:t,callback:a,callbackArgs:o}):de.yaw=e,D(),this},this.getYawBounds=function(){return[de.minYaw,de.maxYaw]},this.setYawBounds=function(e){return de.minYaw=Math.max(-180,Math.min(e[0],180)),de.maxYaw=Math.max(-180,Math.min(e[1],180)),this},this.getHfov=function(){return de.hfov},this.setHfov=function(e,t,a,o){return t=t==n?1e3:Number(t),t?Ye.hfov={startTime:Date.now(),startPosition:de.hfov,endPosition:ee(e),duration:t,callback:a,callbackArgs:o}:te(e),D(),this},this.getHfovBounds=function(){return[de.minHfov,de.maxHfov]},this.setHfovBounds=function(e){return de.minHfov=Math.max(0,e[0]),de.maxHfov=Math.max(0,e[1]),this},this.lookAt=function(e,t,a,o,i,r){return o=o==n?1e3:Number(o),e!==n&&(this.setPitch(e,o,i,r),i=n),t!==n&&(this.setYaw(t,o,i,r),i=n),a!==n&&this.setHfov(a,o,i,r),this},this.getNorthOffset=function(){return de.northOffset},this.setNorthOffset=function(e){return de.northOffset=Math.min(360,Math.max(0,e)),D(),this},this.getHorizonRoll=function(){return de.horizonRoll},this.setHorizonRoll=function(e){return de.horizonRoll=Math.min(90,Math.max(-90,e)),ue.setPose(de.horizonPitch*Math.PI/180,de.horizonRoll*Math.PI/180),D(),this},this.getHorizonPitch=function(){return de.horizonPitch},this.setHorizonPitch=function(e){
return de.horizonPitch=Math.min(90,Math.max(-90,e)),ue.setPose(de.horizonPitch*Math.PI/180,de.horizonRoll*Math.PI/180),D(),this},this.startAutoRotate=function(e){return e=e||Ae||1,de.autoRotate=e,be.lookAt(we,n,ge,3e3),D(),this},this.stopAutoRotate=function(){return Ae=de.autoRotate?de.autoRotate:Ae,de.autoRotate=!1,de.autoRotateInactivityDelay=-1,this},this.getRenderer=function(){return ue},this.setUpdate=function(e){return qe=!0===e,ue===n?l():D(),this},this.mouseEventToCoords=function(e){return v(e)},this.loadScene=function(e,t,n,a){return!1!==fe&&oe(e,t,n,a),this},this.getScene=function(){return de.scene},this.addScene=function(e,t){return o.scenes[e]=t,this},this.removeScene=function(e){return!(de.scene===e||!o.scenes.hasOwnProperty(e))&&(delete o.scenes[e],!0)},this.toggleFullscreen=function(){return J(),this},this.getConfig=function(){return de},this.getContainer=function(){return a},this.addHotSpot=function(e,t){if(t===n&&de.scene===n)de.hotSpots.push(e);else{var a=t!==n?t:de.scene;if(!o.scenes.hasOwnProperty(a))throw"Invalid scene ID!";o.scenes[a].hasOwnProperty("hotSpots")||(o.scenes[a].hotSpots=[],a==de.scene&&(de.hotSpots=o.scenes[a].hotSpots)),o.scenes[a].hotSpots.push(e)}return t!==n&&de.scene!=t||(G(e),fe&&Z(e)),this},this.removeHotSpot=function(e,t){if(t===n||de.scene==t){if(!de.hotSpots)return!1;for(var a=0;a<de.hotSpots.length;a++)if(de.hotSpots[a].hasOwnProperty("id")&&de.hotSpots[a].id===e){for(var i=de.hotSpots[a].div;i.parentNode!=Ze;)i=i.parentNode;return Ze.removeChild(i),delete de.hotSpots[a].div,de.hotSpots.splice(a,1),!0}}else{if(!o.scenes.hasOwnProperty(t))return!1;if(!o.scenes[t].hasOwnProperty("hotSpots"))return!1;for(var a=0;a<o.scenes[t].hotSpots.length;a++)if(o.scenes[t].hotSpots[a].hasOwnProperty("id")&&o.scenes[t].hotSpots[a].id===e)return o.scenes[t].hotSpots.splice(a,1),!0}},this.resize=function(){ue&&H()},this.isLoaded=function(){return fe},this.isOrientationSupported=function(){return Qe||!1},this.stopOrientation=function(){ie()},this.startOrientation=function(){Qe&&re()},this.isOrientationActive=function(){return Boolean(Ne)},this.on=function(e,t){return We[e]=We[e]||[],We[e].push(t),this},this.off=function(e,t){if(!e)return We={},this;if(t){var n=We[e].indexOf(t);n>=0&&We[e].splice(n,1),0==We[e].length&&delete We[e]}else delete We[e];return this},this.destroy=function(){ue&&ue.destroy(),He&&(Xe.removeEventListener("mousedown",f,!1),Xe.removeEventListener("dblclick",m,!1),t.removeEventListener("mousemove",y,!1),t.removeEventListener("mouseup",g,!1),a.removeEventListener("mousewheel",L,!1),a.removeEventListener("DOMMouseScroll",L,!1),a.removeEventListener("mozfullscreenchange",V,!1),a.removeEventListener("webkitfullscreenchange",V,!1),a.removeEventListener("msfullscreenchange",V,!1),a.removeEventListener("fullscreenchange",V,!1),e.removeEventListener("resize",H,!1),e.removeEventListener("orientationchange",H,!1),a.removeEventListener("keydown",k,!1),a.removeEventListener("keyup",I,!1),a.removeEventListener("blur",C,!1),t.removeEventListener("mouseleave",g,!1),Xe.removeEventListener("touchstart",w,!1),Xe.removeEventListener("touchmove",b,!1),Xe.removeEventListener("touchend",P,!1),Xe.removeEventListener("pointerdown",M,!1),Xe.removeEventListener("pointermove",x,!1),Xe.removeEventListener("pointerup",E,!1),Xe.removeEventListener("pointerleave",E,!1)),a.innerHTML="",a.classList.remove("pnlm-container"),je.classList.remove("pnlm-grab"),je.classList.remove("pnlm-grabbing")}}return{viewer:function(e,t){return new a(e,t)}}}(window,document);